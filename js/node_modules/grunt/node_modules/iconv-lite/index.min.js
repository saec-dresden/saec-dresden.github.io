var RE_SPACEDASH=/[- ]/g;var iconv=module.exports={toEncoding:function(b,a){return iconv.getCodec(a).toEncoding(b)},fromEncoding:function(a,b){return iconv.getCodec(b).fromEncoding(a)},encodingExists:function(a){loadEncodings();a=a.replace(RE_SPACEDASH,"").toLowerCase();return(iconv.encodings[a]!==undefined)},defaultCharUnicode:"?",defaultCharSingleByte:"?",encodingsLoaded:false,getCodec:function(d){loadEncodings();var c=d||"utf8";var b=undefined;while(1){if(getType(c)==="String"){c=c.replace(RE_SPACEDASH,"").toLowerCase()}var a=iconv.encodings[c];var e=getType(a);if(e==="String"){b={originalEncoding:c};c=a}else{if(e==="Object"&&a.type!=undefined){b=a;c=a.type}else{if(e==="Function"){return a(b)}else{throw new Error("Encoding not recognized: '"+d+"' (searched as: '"+c+"')")}}}}},encodings:{internal:function(a){return{toEncoding:toInternalEncoding,fromEncoding:fromInternalEncoding,options:a}},utf8:"internal",ucs2:"internal",binary:"internal",ascii:"internal",base64:"internal",singlebyte:function(c){if(!c.charsBuf){if(!c.chars||(c.chars.length!==128&&c.chars.length!==256)){throw new Error("Encoding '"+c.type+"' has incorrect 'chars' (must be of len 128 or 256)")}if(c.chars.length===128){c.chars=asciiString+c.chars}c.charsBuf=new Buffer(c.chars,"ucs2")}if(!c.revCharsBuf){c.revCharsBuf=new Buffer(65536);var a=iconv.defaultCharSingleByte.charCodeAt(0);for(var b=0;b<c.revCharsBuf.length;b++){c.revCharsBuf[b]=a}for(var b=0;b<c.chars.length;b++){c.revCharsBuf[c.chars.charCodeAt(b)]=b}}return{toEncoding:toSingleByteEncoding,fromEncoding:fromSingleByteEncoding,options:c,}},table:function(c){if(!c.table){throw new Error("Encoding '"+c.type+"' has incorect 'table' option")}if(!c.revCharsTable){var d=c.revCharsTable={};for(var a=0;a<=65535;a++){d[a]=0}var e=c.table;for(var b in e){d[e[b]]=+b}}return{toEncoding:toTableEncoding,fromEncoding:fromTableEncoding,options:c,}}}};function toInternalEncoding(a){return new Buffer(ensureString(a),this.options.originalEncoding)}function fromInternalEncoding(a){return ensureBuffer(a).toString(this.options.originalEncoding)}function toTableEncoding(g){g=ensureString(g);var h=g.length;var f=this.options.revCharsTable;var e=new Buffer(h*2),b,k,a=f[iconv.defaultCharUnicode.charCodeAt(0)];for(var c=0,d=0;c<h;c++){k=g.charCodeAt(c);if(k>>7){b=f[k]||a;e[d++]=b>>8;e[d++]=b&255}else{e[d++]=k}}return e.slice(0,d)}function fromTableEncoding(a){a=ensureBuffer(a);var b=a.length;var h=this.options.table;var g=new Buffer(b*2),k,d,c=iconv.defaultCharUnicode.charCodeAt(0);for(var e=0,f=0;e<b;e++,f+=2){d=a[e];if(d&128){d=(d<<8)+a[++e];k=h[d]||c}else{k=d}g[f]=k&255;g[f+1]=k>>8}return g.slice(0,f).toString("ucs2")}function toSingleByteEncoding(d){d=ensureString(d);var a=new Buffer(d.length);var c=this.options.revCharsBuf;for(var b=0;b<d.length;b++){a[b]=c[d.charCodeAt(b)]}return a}function fromSingleByteEncoding(b){b=ensureBuffer(b);var c=this.options.charsBuf;var g=new Buffer(b.length*2);var e=0,f=0;for(var d=0,a=b.length;d<a;d++){e=b[d]*2;f=d*2;g[f]=c[e];g[f+1]=c[e+1]}return g.toString("ucs2")}iconv.encode=iconv.toEncoding;iconv.decode=iconv.fromEncoding;function loadEncodings(){if(!iconv.encodingsLoaded){[require("./encodings/singlebyte"),require("./encodings/gbk"),require("./encodings/big5")].forEach(function(a){for(var b in a){iconv.encodings[b]=a[b]}});iconv.encodingsLoaded=true}}var asciiString="\x00\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\x7f";var ensureBuffer=function(a){a=a||new Buffer(0);return(a instanceof Buffer)?a:new Buffer(""+a,"binary")};var ensureString=function(a){a=a||"";return(a instanceof Buffer)?a.toString("utf8"):(""+a)};var getType=function(a){return Object.prototype.toString.call(a).slice(8,-1)};