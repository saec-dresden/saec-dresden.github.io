var runTests;function adjustRegexLiteral(a,b){if(a==="value"&&b instanceof RegExp){b=b.toString()}return b}function NotMatchingError(b,a){Error.call(this,"Expected ");this.expected=b;this.actual=a}NotMatchingError.prototype=new Error();function errorToObject(a){var b=a.toString();if(b.substr(0,6)!=="Error:"){if(typeof a.message==="string"){b="Error: "+a.message}}return{index:a.index,lineNumber:a.lineNumber,column:a.column,message:b}}function testParse(f,b,n){var g,o,a,l,m,j,k,d;m=String;l={comment:(typeof n.comments!=="undefined"),range:true,loc:true,tokens:(typeof n.tokens!=="undefined"),raw:true,tolerant:(typeof n.errors!=="undefined")};if(typeof n.tokens!=="undefined"){if(n.tokens.length>0){l.range=(typeof n.tokens[0].range!=="undefined");l.loc=(typeof n.tokens[0].loc!=="undefined")}}if(typeof n.comments!=="undefined"){if(n.comments.length>0){l.range=(typeof n.comments[0].range!=="undefined");l.loc=(typeof n.comments[0].loc!=="undefined")}}g=JSON.stringify(n,null,4);try{o=f.parse(b,l);o=(l.comment||l.tokens||l.tolerant)?o:o.body[0];if(l.tolerant){for(j=0,k=o.errors.length;j<k;j+=1){o.errors[j]=errorToObject(o.errors[j])}}a=JSON.stringify(o,adjustRegexLiteral,4);f.parse(new m(b),l)}catch(c){throw new NotMatchingError(g,c.toString())}if(g!==a){throw new NotMatchingError(g,a)}function h(e,i){if(e==="value"&&i instanceof RegExp){i=i.toString()}return(e==="loc"||e==="range")?undefined:i}if(l.tolerant){return}l.range=false;l.loc=false;g=JSON.stringify(n,h,4);try{o=f.parse(b,l);o=(l.comment||l.tokens)?o:o.body[0];if(l.tolerant){for(j=0,k=o.errors.length;j<k;j+=1){o.errors[j]=errorToObject(o.errors[j])}}a=JSON.stringify(o,h,4)}catch(c){throw new NotMatchingError(g,c.toString())}if(g!==a){throw new NotMatchingError(g,a)}}function testError(d,b,f){var j,k,g,a,h;k=[{},{comment:true},{raw:true},{raw:true,comment:true}];h=false;try{"test".match(new RegExp("[a-z]","x"))}catch(c){h=true}g=JSON.stringify(f);for(j=0;j<k.length;j+=1){try{d.parse(b,k[j])}catch(c){a=JSON.stringify(errorToObject(c))}if(g!==a){if(f.message.indexOf("Invalid regular expression")>0){if(typeof a==="undefined"&&!h){return}}throw new NotMatchingError(g,a)}}}function testAPI(d,b,h){var f,g,a;f=JSON.stringify(h.result,null,4);try{if(typeof h.property!=="undefined"){g=d[h.property]}else{g=d[h.call].apply(d,h.args)}a=JSON.stringify(g,adjustRegexLiteral,4)}catch(c){throw new NotMatchingError(f,c.toString())}if(f!==a){throw new NotMatchingError(f,a)}}function runTest(b,a,c){if(c.hasOwnProperty("lineNumber")){testError(b,a,c)}else{if(c.hasOwnProperty("result")){testAPI(b,a,c)}else{testParse(b,a,c)}}}if(typeof window!=="undefined"){runTests=function(){var o=0,d=0,a,f,l,n,c,g,h;function k(e,p){if(typeof e.innerText==="string"){e.innerText=p}else{e.textContent=p}}function m(p){var r,q;r=document.getElementById("report");q=document.createElement("h4");k(q,p);r.appendChild(q)}function j(p){var r,q;r=document.getElementById("report");q=document.createElement("pre");q.setAttribute("class","code");k(q,p);r.appendChild(q)}function i(q,s,p){var t,r;t=document.getElementById("report");r=document.createElement("p");k(r,"Code:");t.appendChild(r);r=document.createElement("pre");r.setAttribute("class","code");k(r,q);t.appendChild(r);r=document.createElement("p");k(r,"Expected");t.appendChild(r);r=document.createElement("pre");r.setAttribute("class","expected");k(r,s);t.appendChild(r);r=document.createElement("p");k(r,"Actual");t.appendChild(r);r=document.createElement("pre");r.setAttribute("class","actual");k(r,p);t.appendChild(r)}k(document.getElementById("version"),esprima.version);n=new Date();for(a in testFixture){if(testFixture.hasOwnProperty(a)){m(a);f=testFixture[a];for(l in f){if(f.hasOwnProperty(l)){c=f[l];o+=1;try{runTest(esprima,l,c);j(l,JSON.stringify(c,null,4))}catch(b){d+=1;i(l,b.expected,b.actual)}}}}}n=(new Date())-n;if(d>0){k(document.getElementById("status"),o+" tests. Failures: "+d+". "+n+" ms")}else{k(document.getElementById("status"),o+" tests. No failure. "+n+" ms")}}}else{(function(){var a=require("../esprima"),h=require("vm"),d=require("fs"),g=0,c=[],f=new Date(),b,e;h.runInThisContext(d.readFileSync(__dirname+"/test.js","utf-8"));Object.keys(testFixture).forEach(function(i){Object.keys(testFixture[i]).forEach(function(k){g+=1;b=testFixture[i][k];try{runTest(a,k,b)}catch(j){j.source=k;c.push(j)}})});f=(new Date())-f;e=g+" tests. "+c.length+" failures. "+f+" ms";if(c.length){console.error(e);c.forEach(function(i){console.error(i.source+": Expected\n    "+i.expected.split("\n").join("\n    ")+"\nto match\n    "+i.actual)})}else{console.log(e)}process.exit(c.length===0?0:1)}())};