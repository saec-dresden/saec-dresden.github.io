"use strict";var util=require("util");var format=require("util").format;var _=require("underscore");var Action=require("../action");var $$=require("../const");var argumentErrorHelper=require("../argument/error");var ChoicesPseudoAction=function(b,a){var c={optionStrings:[],dest:b,help:a};Action.call(this,c)};util.inherits(ChoicesPseudoAction,Action);var ActionSubparsers=module.exports=function ActionSubparsers(a){a=a||{};a.dest=a.dest||$$.SUPPRESS;a.nargs=$$.PARSER;this.debug=(a.debug===true);this._progPrefix=a.prog;this._parserClass=a.parserClass;this._nameParserMap={};this._choicesActions=[];a.choices=this._nameParserMap;Action.call(this,a)};util.inherits(ActionSubparsers,Action);ActionSubparsers.prototype.addParser=function(d,e){var f;var g=this;e=e||{};e.debug=(this.debug===true);if(!e.prog){e.prog=this._progPrefix+" "+d}var a=e.aliases||[];if(!!e.help||_.isString(e.help)){var c=e.help;delete e.help;var b=new ChoicesPseudoAction(d,c);this._choicesActions.push(b)}f=new this._parserClass(e);this._nameParserMap[d]=f;a.forEach(function(h){g._nameParserMap[h]=f});return f};ActionSubparsers.prototype._getSubactions=function(){return this._choicesActions};ActionSubparsers.prototype.call=function(c,b,e){var d=e[0];var a=e.slice(1);if(this.dest!==$$.SUPPRESS){b[this.dest]=d}if(!!this._nameParserMap[d]){c=this._nameParserMap[d]}else{throw argumentErrorHelper(format('Unknown parser "%s" (choices: [%s]).',d,_.keys(this._nameParserMap).join(", ")))}c.parseArgs(a,b)};