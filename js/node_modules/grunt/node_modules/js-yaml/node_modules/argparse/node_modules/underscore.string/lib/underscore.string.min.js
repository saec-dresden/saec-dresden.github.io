!function(k,n){var f=n.prototype.trim;var h=n.prototype.trimRight;var g=n.prototype.trimLeft;var i=function(p){return p*1||0};var o=function(r,p){if(p<1){return""}var q="";while(p>0){if(p&1){q+=r}p>>=1,r+=r}return q};var l=[].slice;var c=function(p){if(p==null){return"\\s"}else{if(p.source){return p.source}else{return"["+a.escapeRegExp(p)+"]"}}};function b(u,t){var q,r,p=u.toLowerCase();t=[].concat(t);for(q=0;q<t.length;q+=1){r=t[q];if(!r){continue}if(r.test&&r.test(u)){return true}if(r.toLowerCase()===p){return true}}}var d={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"};var j={};for(var e in d){j[d[e]]=e}j["'"]="#39";var m=(function(){function p(s){return Object.prototype.toString.call(s).slice(8,-1).toLowerCase()}var r=o;var q=function(){if(!q.cache.hasOwnProperty(arguments[0])){q.cache[arguments[0]]=q.parse(arguments[0])}return q.format.call(null,q.cache[arguments[0]],arguments)};q.format=function(D,t){var u=1,E=D.length,y="",s,z=[],v,w,x,A,B,C;for(v=0;v<E;v++){y=p(D[v]);if(y==="string"){z.push(D[v])}else{if(y==="array"){x=D[v];if(x[2]){s=t[u];for(w=0;w<x[2].length;w++){if(!s.hasOwnProperty(x[2][w])){throw new Error(m('[_.sprintf] property "%s" does not exist',x[2][w]))}s=s[x[2][w]]}}else{if(x[1]){s=t[x[1]]}else{s=t[u++]}}if(/[^s]/.test(x[8])&&(p(s)!="number")){throw new Error(m("[_.sprintf] expecting number but found %s",p(s)))}switch(x[8]){case"b":s=s.toString(2);break;case"c":s=n.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=x[7]?s.toExponential(x[7]):s.toExponential();break;case"f":s=x[7]?parseFloat(s).toFixed(x[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=((s=n(s))&&x[7]?s.substring(0,x[7]):s);break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase();break}s=(/[def]/.test(x[8])&&x[3]&&s>=0?"+"+s:s);B=x[4]?x[4]=="0"?"0":x[4].charAt(1):" ";C=x[6]-n(s).length;A=x[6]?r(B,C):"";z.push(x[5]?s+A:A+s)}}}return z.join("")};q.cache={};q.parse=function(w){var s=w,x=[],y=[],t=0;while(s){if((x=/^[^\x25]+/.exec(s))!==null){y.push(x[0])}else{if((x=/^\x25{2}/.exec(s))!==null){y.push("%")}else{if((x=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(s))!==null){if(x[2]){t|=1;var u=[],z=x[2],v=[];if((v=/^([a-z_][a-z_\d]*)/i.exec(z))!==null){u.push(v[1]);while((z=z.substring(v[0].length))!==""){if((v=/^\.([a-z_][a-z_\d]*)/i.exec(z))!==null){u.push(v[1])}else{if((v=/^\[(\d+)\]/.exec(z))!==null){u.push(v[1])}else{throw new Error("[_.sprintf] huh?")}}}}else{throw new Error("[_.sprintf] huh?")}x[2]=u}else{t|=2}if(t===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}y.push(x)}else{throw new Error("[_.sprintf] huh?")}}}s=s.substring(x[0].length)}return y};return q})();var a={VERSION:"2.4.0",isBlank:function(p){if(p==null){p=""}return(/^\s*$/).test(p)},stripTags:function(p){if(p==null){return""}return n(p).replace(/<\/?[^>]+>/g,"")},capitalize:function(p){p=p==null?"":n(p);return p.charAt(0).toUpperCase()+p.slice(1)},chop:function(q,p){if(q==null){return[]}q=n(q);p=~~p;return p>0?q.match(new RegExp(".{1,"+p+"}","g")):[q]},clean:function(p){return a.strip(p).replace(/\s+/g," ")},count:function(s,t){if(s==null||t==null){return 0}s=n(s);t=n(t);var p=0,r=0,q=t.length;while(true){r=s.indexOf(t,r);if(r===-1){break}p++;r+=q}return p},chars:function(p){if(p==null){return[]}return n(p).split("")},swapCase:function(p){if(p==null){return""}return n(p).replace(/\S/g,function(q){return q===q.toUpperCase()?q.toLowerCase():q.toUpperCase()})},escapeHTML:function(p){if(p==null){return""}return n(p).replace(/[&<>"']/g,function(q){return"&"+j[q]+";"})},unescapeHTML:function(p){if(p==null){return""}return n(p).replace(/\&([^;]+);/g,function(q,r){var s;if(r in d){return d[r]}else{if(s=r.match(/^#x([\da-fA-F]+)$/)){return n.fromCharCode(parseInt(s[1],16))}else{if(s=r.match(/^#(\d+)$/)){return n.fromCharCode(~~s[1])}else{return q}}}})},escapeRegExp:function(p){if(p==null){return""}return n(p).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(s,r,q,t){var p=a.chars(s);p.splice(~~r,~~q,t);return p.join("")},insert:function(q,p,r){return a.splice(q,p,0,r)},include:function(q,p){if(p===""){return true}if(q==null){return false}return n(q).indexOf(p)!==-1},join:function(){var p=l.call(arguments),q=p.shift();if(q==null){q=""}return p.join(q)},lines:function(p){if(p==null){return[]}return n(p).split("\n")},reverse:function(p){return a.chars(p).reverse().join("")},startsWith:function(q,p){if(p===""){return true}if(q==null||p==null){return false}q=n(q);p=n(p);return q.length>=p.length&&q.slice(0,p.length)===p},endsWith:function(q,p){if(p===""){return true}if(q==null||p==null){return false}q=n(q);p=n(p);return q.length>=p.length&&q.slice(q.length-p.length)===p},succ:function(p){if(p==null){return""}p=n(p);return p.slice(0,-1)+n.fromCharCode(p.charCodeAt(p.length-1)+1)},titleize:function(p){if(p==null){return""}p=n(p).toLowerCase();return p.replace(/(?:^|\s|-)\S/g,function(q){return q.toUpperCase()})},camelize:function(p){return a.trim(p).replace(/[-_\s]+(.)?/g,function(r,q){return q?q.toUpperCase():""})},underscored:function(p){return a.trim(p).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(p){return a.trim(p).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(p){return a.capitalize(a.camelize(n(p).replace(/[\W_]/g," ")).replace(/\s/g,""))},humanize:function(p){return a.capitalize(a.underscored(p).replace(/_id$/,"").replace(/_/g," "))},trim:function(q,p){if(q==null){return""}if(!p&&f){return f.call(q)}p=c(p);return n(q).replace(new RegExp("^"+p+"+|"+p+"+$","g"),"")},ltrim:function(q,p){if(q==null){return""}if(!p&&g){return g.call(q)}p=c(p);return n(q).replace(new RegExp("^"+p+"+"),"")},rtrim:function(q,p){if(q==null){return""}if(!p&&h){return h.call(q)}p=c(p);return n(q).replace(new RegExp(p+"+$"),"")},truncate:function(q,p,r){if(q==null){return""}q=n(q);r=r||"...";p=~~p;return q.length>p?q.slice(0,p)+r:q},prune:function(r,p,q){if(r==null){return""}r=n(r);p=~~p;q=q!=null?n(q):"...";if(r.length<=p){return r}var t=function(u){return u.toUpperCase()!==u.toLowerCase()?"A":" "},s=r.slice(0,p+1).replace(/.(?=\W*\w*$)/g,t);if(s.slice(s.length-2).match(/\w\w/)){s=s.replace(/\s*\S+$/,"")}else{s=a.rtrim(s.slice(0,s.length-1))}return(s+q).length>r.length?r:r.slice(0,s.length)+q},words:function(q,p){if(a.isBlank(q)){return[]}return a.trim(q,p).split(p||/\s+/)},pad:function(s,p,r,t){s=s==null?"":n(s);p=~~p;var q=0;if(!r){r=" "}else{if(r.length>1){r=r.charAt(0)}}switch(t){case"right":q=p-s.length;return s+o(r,q);case"both":q=p-s.length;return o(r,Math.ceil(q/2))+s+o(r,Math.floor(q/2));default:q=p-s.length;return o(r,q)+s}},lpad:function(r,p,q){return a.pad(r,p,q)},rpad:function(r,p,q){return a.pad(r,p,q,"right")},lrpad:function(r,p,q){return a.pad(r,p,q,"both")},sprintf:m,vsprintf:function(q,p){p.unshift(q);return m.apply(null,p)},toNumber:function(q,p){if(!q){return 0}q=a.trim(q);if(!q.match(/^-?\d+(?:\.\d+)?$/)){return NaN}return i(i(q).toFixed(~~p))},numberFormat:function(t,p,r,v){if(isNaN(t)||t==null){return""}t=t.toFixed(~~p);v=typeof v=="string"?v:",";var u=t.split("."),s=u[0],q=u[1]?(r||".")+u[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+v)+q},strRight:function(r,q){if(r==null){return""}r=n(r);q=q!=null?n(q):q;var p=!q?-1:r.indexOf(q);return ~p?r.slice(p+q.length,r.length):r},strRightBack:function(r,q){if(r==null){return""}r=n(r);q=q!=null?n(q):q;var p=!q?-1:r.lastIndexOf(q);return ~p?r.slice(p+q.length,r.length):r},strLeft:function(r,q){if(r==null){return""}r=n(r);q=q!=null?n(q):q;var p=!q?-1:r.indexOf(q);return ~p?r.slice(0,p):r},strLeftBack:function(r,q){if(r==null){return""}r+="";q=q!=null?""+q:q;var p=r.lastIndexOf(q);return ~p?r.slice(0,p):r},toSentence:function(q,t,s,u){t=t||", ";s=s||" and ";var p=q.slice(),r=p.pop();if(q.length>2&&u){s=a.rtrim(t)+s}return p.length?p.join(t)+s+r:r},toSentenceSerial:function(){var p=l.call(arguments);p[3]=true;return a.toSentence.apply(a,p)},slugify:function(r){if(r==null){return""}var p="aàáäâãåæaceèéëêìíïîlnòóöôõøs??ùúüûñçzz",s="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",q=new RegExp(c(p),"g");r=n(r).toLowerCase().replace(q,function(t){var u=p.indexOf(t);return s.charAt(u)||"-"});return a.dasherize(r.replace(/[^\w\s-]/g,""))},surround:function(p,q){return[q,p,q].join("")},quote:function(q,p){return a.surround(q,p||'"')},unquote:function(q,p){p=p||'"';if(q[0]===p&&q[q.length-1]===p){return q.slice(1,q.length-1)}else{return q}},exports:function(){var q={};for(var p in this){if(!this.hasOwnProperty(p)||p.match(/^(?:include|contains|reverse)$/)){continue}q[p]=this[p]}return q},repeat:function(s,p,r){if(s==null){return""}p=~~p;if(r==null){return o(n(s),p)}for(var q=[];p>0;q[--p]=s){}return q.join(r)},naturalCmp:function(w,x){if(w==x){return 0}if(!w){return -1}if(!x){return 1}var r=/(\.\d+)|(\d+)|(\D+)/g,y=n(w).toLowerCase().match(r),z=n(x).toLowerCase().match(r),s=Math.min(y.length,z.length);for(var t=0;t<s;t++){var p=y[t],q=z[t];if(p!==q){var u=parseInt(p,10);if(!isNaN(u)){var v=parseInt(q,10);if(!isNaN(v)&&u-v){return u-v}}return p<q?-1:1}}if(y.length===z.length){return y.length-z.length}return w<x?-1:1},levenshtein:function(t,u){if(t==null&&u==null){return 0}if(t==null){return n(u).length}if(u==null){return n(t).length}t=n(t);u=n(u);var p=[],s,v;for(var q=0;q<=u.length;q++){for(var r=0;r<=t.length;r++){if(q&&r){if(t.charAt(r-1)===u.charAt(q-1)){v=s}else{v=Math.min(p[r],p[r-1],s)+1}}else{v=q+r}s=p[r];p[r]=v}}return p.pop()},toBoolean:function(q,r,p){if(typeof q==="number"){q=""+q}if(typeof q!=="string"){return !!q}q=a.trim(q);if(b(q,r||["true","1"])){return true}if(b(q,p||["false","0"])){return false}}};a.strip=a.trim;a.lstrip=a.ltrim;a.rstrip=a.rtrim;a.center=a.lrpad;a.rjust=a.lpad;a.ljust=a.rpad;a.contains=a.include;a.q=a.quote;a.toBool=a.toBoolean;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=a}exports._s=a}if(typeof define==="function"&&define.amd){define("underscore.string",[],function(){return a})}k._=k._||{};k._.string=k._.str=a}(this,String);