(function(){var c,d,f,g,h,a,b,e;exports.OptionParser=g=(function(){function i(k,j){this.banner=j;this.rules=b(k)}i.prototype.parse=function(p){var o,q,r,s,t,u,v,w,x,y,z,j,k,l,m,n;t={"arguments":[]};y=false;u=p;p=e(p);for(q=j=0,l=p.length;j<l;q=++j){o=p[q];if(y){y=false;continue}if(o==="--"){v=u.indexOf("--");t["arguments"]=t["arguments"].concat(u.slice(v+1));break}r=!!(o.match(c)||o.match(h));x=t["arguments"].length>0;if(!x){s=false;n=this.rules;for(k=0,m=n.length;k<m;k++){w=n[k];if(w.shortFlag===o||w.longFlag===o){z=true;if(w.hasArgument){y=true;z=p[q+1]}t[w.name]=w.isList?(t[w.name]||[]).concat(z):z;s=true;break}}if(r&&!s){throw new Error("unrecognized option: "+o)}}if(x||!r){t["arguments"].push(o)}}return t};i.prototype.help=function(){var m,n,o,p,j,k,l;n=[];if(this.banner){n.unshift(""+this.banner+"\n")}l=this.rules;for(j=0,k=l.length;j<k;j++){o=l[j];p=15-o.longFlag.length;p=p>0?Array(p+1).join(" "):"";m=o.shortFlag?o.shortFlag+", ":"    ";n.push("  "+m+o.longFlag+p+o.description)}return"\n"+(n.join("\n"))+"\n"};return i})();c=/^(--\w[\w\-]*)/;h=/^(-\w)$/;d=/^-(\w{2,})/;f=/\[(\w+(\*?))\]/;b=function(l){var m,i,j,k;k=[];for(i=0,j=l.length;i<j;i++){m=l[i];if(m.length<3){m.unshift(null)}k.push(a.apply(null,m))}return k};a=function(m,j,i,l){var k;if(l==null){l={}}k=j.match(f);j=j.match(c)[1];return{name:j.substr(2),shortFlag:m,longFlag:j,description:i,hasArgument:!!(k&&k[1]),isList:!!(k&&k[2])}};e=function(p){var o,q,r,s,i,j,k,m,n;p=p.slice(0);s=[];for(i=0,k=p.length;i<k;i++){o=p[i];if(r=o.match(d)){n=r[1].split("");for(j=0,m=n.length;j<m;j++){q=n[j];s.push("-"+q)}}else{s.push(o)}}return s}}).call(this);