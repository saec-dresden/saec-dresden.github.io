module.exports=which;which.sync=whichSync;var path=require("path"),fs,COLON=process.platform==="win32"?";":":",isExe,fs=require("fs");if(process.platform=="win32"){isExe=function isExe(){return true}}else{isExe=function isExe(b,d,a){var c=(b&1)||(b&8)&&process.getgid&&a===process.getgid()||(b&8)&&process.getuid&&0===process.getuid()||(b&64)&&process.getuid&&d===process.getuid()||(b&64)&&process.getuid&&0===process.getuid();return c}}function which(b,a){if(isAbsolute(b)){return a(null,b)}var d=(process.env.PATH||"").split(COLON),e=[""];if(process.platform==="win32"){d.push(process.cwd());e=(process.env.PATHEXT||".EXE").split(COLON);if(b.indexOf(".")!==-1){e.unshift("")}}(function c(g,h){if(g===h){return a(new Error("not found: "+b))}var j=path.resolve(d[g],b);(function f(k,l){if(k===l){return c(g+1,h)}var i=e[k];fs.stat(j+i,function(m,n){if(!m&&n&&n.isFile()&&isExe(n.mode,n.uid,n.gid)){return a(null,j+i)}return f(k+1,l)})})(0,e.length)})(0,d.length)}function whichSync(a){if(isAbsolute(a)){return a}var k=(process.env.PATH||"").split(COLON),m=[""];if(process.platform==="win32"){k.push(process.cwd());m=(process.env.PATHEXT||".EXE").split(COLON);if(a.indexOf(".")!==-1){m.unshift("")}}for(var d=0,f=k.length;d<f;d++){var h=path.join(k[d],a);for(var e=0,g=m.length;e<g;e++){var b=h+m[e];var n;try{n=fs.statSync(b)}catch(c){}if(n&&n.isFile()&&isExe(n.mode,n.uid,n.gid)){return b}}}throw new Error("not found: "+a)}var isAbsolute=process.platform==="win32"?absWin:absUnix;function absWin(d){if(absUnix(d)){return true}var f=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?([\\\/])?/,e=f.exec(d),a=e[1]||"",c=a&&a.charAt(1)!==":",b=!!e[2]||c;return b}function absUnix(a){return a.charAt(0)==="/"||a===""};