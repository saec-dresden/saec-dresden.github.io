var t=require("tap");var origCwd=process.cwd();process.chdir(__dirname);var glob=require("../");var path=require("path");t.test(".",function(a){glob("/b*/**",{globDebug:true,root:"."},function(b,c){a.ifError(b);a.like(c,[]);a.end()})});t.test("a",function(a){console.error("root="+path.resolve("a"));glob("/b*/**",{globDebug:true,root:path.resolve("a")},function(b,c){a.ifError(b);var d=["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(e){return path.join(path.resolve("a"),e).replace(/\\/g,"/")});a.like(c,d);a.end()})});t.test("root=a, cwd=a/b",function(a){glob("/b*/**",{globDebug:true,root:"a",cwd:path.resolve("a/b")},function(b,c){a.ifError(b);a.like(c,["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(d){return path.join(path.resolve("a"),d).replace(/\\/g,"/")}));a.end()})});t.test("cd -",function(a){process.chdir(origCwd);a.end()});