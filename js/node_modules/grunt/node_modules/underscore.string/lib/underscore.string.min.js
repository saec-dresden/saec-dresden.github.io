(function(j){var e=String.prototype.trim;var g=String.prototype.trimRight;var f=String.prototype.trimLeft;var h=function(n){return n*1||0};var m=function(q,n,p){q+="";n=~~n;for(var o=[];n>0;o[--n]=q){}return o.join(p==null?"":p)};var k=function(n){return Array.prototype.slice.call(n)};var b=function(n){if(n!=null){return"["+a.escapeRegExp(""+n)+"]"}return"\\s"};var c={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"};var i={};for(var d in c){i[c[d]]=d}var l=(function(){function n(q){return Object.prototype.toString.call(q).slice(8,-1).toLowerCase()}var p=m;var o=function(){if(!o.cache.hasOwnProperty(arguments[0])){o.cache[arguments[0]]=o.parse(arguments[0])}return o.format.call(null,o.cache[arguments[0]],arguments)};o.format=function(B,r){var s=1,C=B.length,w="",q,x=[],t,u,v,y,z,A;for(t=0;t<C;t++){w=n(B[t]);if(w==="string"){x.push(B[t])}else{if(w==="array"){v=B[t];if(v[2]){q=r[s];for(u=0;u<v[2].length;u++){if(!q.hasOwnProperty(v[2][u])){throw new Error(l('[_.sprintf] property "%s" does not exist',v[2][u]))}q=q[v[2][u]]}}else{if(v[1]){q=r[v[1]]}else{q=r[s++]}}if(/[^s]/.test(v[8])&&(n(q)!="number")){throw new Error(l("[_.sprintf] expecting number but found %s",n(q)))}switch(v[8]){case"b":q=q.toString(2);break;case"c":q=String.fromCharCode(q);break;case"d":q=parseInt(q,10);break;case"e":q=v[7]?q.toExponential(v[7]):q.toExponential();break;case"f":q=v[7]?parseFloat(q).toFixed(v[7]):parseFloat(q);break;case"o":q=q.toString(8);break;case"s":q=((q=String(q))&&v[7]?q.substring(0,v[7]):q);break;case"u":q=Math.abs(q);break;case"x":q=q.toString(16);break;case"X":q=q.toString(16).toUpperCase();break}q=(/[def]/.test(v[8])&&v[3]&&q>=0?"+"+q:q);z=v[4]?v[4]=="0"?"0":v[4].charAt(1):" ";A=v[6]-String(q).length;y=v[6]?p(z,A):"";x.push(v[5]?q+y:y+q)}}}return x.join("")};o.cache={};o.parse=function(u){var q=u,v=[],w=[],r=0;while(q){if((v=/^[^\x25]+/.exec(q))!==null){w.push(v[0])}else{if((v=/^\x25{2}/.exec(q))!==null){w.push("%")}else{if((v=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(q))!==null){if(v[2]){r|=1;var s=[],x=v[2],t=[];if((t=/^([a-z_][a-z_\d]*)/i.exec(x))!==null){s.push(t[1]);while((x=x.substring(t[0].length))!==""){if((t=/^\.([a-z_][a-z_\d]*)/i.exec(x))!==null){s.push(t[1])}else{if((t=/^\[(\d+)\]/.exec(x))!==null){s.push(t[1])}else{throw new Error("[_.sprintf] huh?")}}}}else{throw new Error("[_.sprintf] huh?")}v[2]=s}else{r|=2}if(r===3){throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported")}w.push(v)}else{throw new Error("[_.sprintf] huh?")}}}q=q.substring(v[0].length)}return w};return o})();var a={VERSION:"2.2.0rc",isBlank:function(n){return(/^\s*$/).test(n)},stripTags:function(n){return(""+n).replace(/<\/?[^>]+>/g,"")},capitalize:function(n){n+="";return n.charAt(0).toUpperCase()+n.substring(1)},chop:function(q,p){q=q+"";p=~~p||q.length;var n=[];for(var o=0;o<q.length;o+=p){n.push(q.slice(o,o+p))}return n},clean:function(n){return a.strip(n).replace(/\s+/g," ")},count:function(n,o){n+="";o+="";return n.split(o).length-1},chars:function(n){return(""+n).split("")},escapeHTML:function(n){return(""+n).replace(/[&<>"']/g,function(o){return"&"+i[o]+";"})},unescapeHTML:function(n){return(""+n).replace(/\&([^;]+);/g,function(o,p){var q;if(p in c){return c[p]}else{if(q=p.match(/^#x([\da-fA-F]+)$/)){return String.fromCharCode(parseInt(q[1],16))}else{if(q=p.match(/^#(\d+)$/)){return String.fromCharCode(~~q[1])}else{return o}}}})},escapeRegExp:function(n){return n.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},insert:function(p,o,q){var n=a.chars(p);n.splice(~~o,0,""+q);return n.join("")},include:function(o,n){return !!~(""+o).indexOf(n)},join:function(){var n=k(arguments);return n.join(n.shift())},lines:function(n){return(""+n).split("\n")},reverse:function(n){return a.chars(n).reverse().join("")},splice:function(q,p,o,r){var n=a.chars(q);n.splice(~~p,~~o,r);return n.join("")},startsWith:function(o,n){o+="";n+="";return o.length>=n.length&&o.substring(0,n.length)===n},endsWith:function(o,n){o+="";n+="";return o.length>=n.length&&o.substring(o.length-n.length)===n},succ:function(o){o+="";var n=a.chars(o);n.splice(o.length-1,1,String.fromCharCode(o.charCodeAt(o.length-1)+1));return n.join("")},titleize:function(n){return(""+n).replace(/\b./g,function(o){return o.toUpperCase()})},camelize:function(n){return a.trim(n).replace(/[-_\s]+(.)?/g,function(p,o){return o&&o.toUpperCase()})},underscored:function(n){return a.trim(n).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(n){return a.trim(n).replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase()},classify:function(n){n+="";return a.titleize(n.replace(/_/g," ")).replace(/\s/g,"")},humanize:function(n){return a.capitalize(this.underscored(n).replace(/_id$/,"").replace(/_/g," "))},trim:function(o,n){o+="";if(!n&&e){return e.call(o)}n=b(n);return o.replace(new RegExp("^"+n+"+|"+n+"+$","g"),"")},ltrim:function(o,n){o+="";if(!n&&f){return f.call(o)}n=b(n);return o.replace(new RegExp("^"+n+"+"),"")},rtrim:function(o,n){o+="";if(!n&&g){return g.call(o)}n=b(n);return o.replace(new RegExp(n+"+$"),"")},truncate:function(o,n,p){o+="";p=p||"...";n=~~n;return o.length>n?o.slice(0,n)+p:o},prune:function(r,o,q){r+="";o=~~o;q=q!=null?""+q:"...";var p,n,s=r.replace(/\W/g,function(t){return(t.toUpperCase()!==t.toLowerCase())?"A":" "});n=s.charAt(o);p=s.slice(0,o);if(n&&n.match(/\S/)){p=p.replace(/\s\S+$/,"")}p=a.rtrim(p);return(p+q).length>r.length?r:r.substring(0,p.length)+q},words:function(o,n){return a.trim(o,n).split(n||/\s+/)},pad:function(q,n,p,r){q+="";var o=0;n=~~n;if(!p){p=" "}else{if(p.length>1){p=p.charAt(0)}}switch(r){case"right":o=(n-q.length);return q+m(p,o);case"both":o=(n-q.length);return m(p,Math.ceil(o/2))+q+m(p,Math.floor(o/2));default:o=(n-q.length);return m(p,o)+q}},lpad:function(p,n,o){return a.pad(p,n,o)},rpad:function(p,n,o){return a.pad(p,n,o,"right")},lrpad:function(p,n,o){return a.pad(p,n,o,"both")},sprintf:l,vsprintf:function(o,n){n.unshift(o);return l.apply(null,n)},toNumber:function(p,n){p+="";var o=h(h(p).toFixed(~~n));return o===0&&!p.match(/^0+$/)?Number.NaN:o},strRight:function(p,o){p+="";o=o!=null?""+o:o;var n=!o?-1:p.indexOf(o);return ~n?p.slice(n+o.length,p.length):p},strRightBack:function(p,o){p+="";o=o!=null?""+o:o;var n=!o?-1:p.lastIndexOf(o);return ~n?p.slice(n+o.length,p.length):p},strLeft:function(p,o){p+="";o=o!=null?""+o:o;var n=!o?-1:p.indexOf(o);return ~n?p.slice(0,n):p},strLeftBack:function(p,o){p+="";o=o!=null?""+o:o;var n=p.lastIndexOf(o);return ~n?p.slice(0,n):p},toSentence:function(n,r,p){r||(r=", ");p||(p=" and ");var q=n.length,s="";for(var o=0;o<q;o++){s+=n[o];if(o===(q-2)){s+=p}else{if(o<(q-1)){s+=r}}}return s},slugify:function(p){var n="aàáäâãceèéëêìíïîlnòóöôõùúüûñçzz",q="aaaaaaceeeeeiiiilnooooouuuunczz",o=new RegExp(b(n),"g");p=(""+p).toLowerCase();p=p.replace(o,function(r){var s=n.indexOf(r);return q.charAt(s)||"-"});return a.trim(p.replace(/[^\w\s-]/g,"").replace(/[-\s]+/g,"-"),"-")},exports:function(){var o={};for(var n in this){if(!this.hasOwnProperty(n)||~a.words("include contains reverse").indexOf(n)){continue}o[n]=this[n]}return o},repeat:m};a.strip=a.trim;a.lstrip=a.ltrim;a.rstrip=a.rtrim;a.center=a.lrpad;a.rjust=a.lpad;a.ljust=a.rpad;a.contains=a.include;if(typeof exports!=="undefined"){if(typeof module!=="undefined"&&module.exports){module.exports=a}exports._s=a}else{if(typeof define==="function"&&define.amd){define("underscore.string",function(){return a})}else{j._=j._||{};j._.string=j._.str=a}}}(this||window));