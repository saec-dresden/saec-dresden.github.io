function waitFor(e,a,f){var c,d=new Date().getTime();setInterval(function b(){if((new Date().getTime()-d<f)&&!c){c=e()}else{if(!c){phantom.exit(1)}else{a();clearInterval(b)}}},100)}var fs=require("fs"),page=require("webpage").create();var url="file://localhost"+fs.workingDirectory+"/"+phantom.args[0];page.onConsoleMessage=function(a){console.log(a)};page.open(url,function(a){waitFor(function(){return page.evaluate(function(){var b=document.getElementById("qunit-testresult");return b&&b.innerText.match("completed")})},function(){var b=page.evaluate(function(){var c=document.getElementById("qunit-testresult"),d=document.getElementsByClassName("fail");for(var e=0;e<d.length;e++){console.log(d[e].innerText)}console.log(c.innerText);return parseInt(c.getElementsByClassName("failed")[0].innerHTML)});phantom.exit(b>0?1:0)},10000)});