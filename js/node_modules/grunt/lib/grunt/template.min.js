"use strict";var grunt=require("../grunt");var template=module.exports={};template.date=require("dateformat");template.today=function(a){return template.date(new Date(),a)};var allDelimiters={};template.addDelimiters=function(g,h,e){var f=allDelimiters[g]={};f.opener=h;f.closer=e;var c=f.opener.replace(/(.)/g,"\\$1");var d="([\\s\\S]+?)"+f.closer.replace(/(.)/g,"\\$1");f.lodash={evaluate:new RegExp(c+d,"g"),interpolate:new RegExp(c+"="+d,"g"),escape:new RegExp(c+"-"+d,"g")}};template.addDelimiters("config","<%","%>");template.setDelimiters=function(b){var a=allDelimiters[b in allDelimiters?b:"config"];grunt.util._.templateSettings=a.lodash;return a};template.process=function(g,f){if(!f){f={}}var b=template.setDelimiters(f.delimiters);var a=Object.create(f.data||grunt.config.data||{});if(!("grunt" in a)){a.grunt=grunt}var d=g;try{while(g.indexOf(b.opener)>=0){g=grunt.util._.template(g,a);if(g===d){break}d=g}}catch(c){if(String(c)==="SyntaxError: Unexpected token ILLEGAL"&&/\n|\r/.test(g)){grunt.log.errorlns("A special character was detected in this template. Inside template tags, the \\n and \\r special characters must be escaped as \\\\n and \\\\r. (grunt 0.4.0+)")}c.message="An error occurred while processing a template ("+c.message+").";grunt.warn(c,grunt.fail.code.TEMPLATE_ERROR)}return grunt.util.normalizelf(g)};