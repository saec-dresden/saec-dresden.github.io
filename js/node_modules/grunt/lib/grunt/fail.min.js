"use strict";var grunt=require("../grunt");var fail=module.exports={};fail.code={FATAL_ERROR:1,MISSING_GRUNTFILE:2,TASK_FAILURE:3,TEMPLATE_ERROR:4,INVALID_AUTOCOMPLETE:5,WARNING:6,};function writeln(a,b){grunt.log.muted=false;var c=String(a.message||a);if(!grunt.option("no-color")){c+="\x07"}if(b==="warn"){c="Warning: "+c+" ";c+=(grunt.option("force")?"Used --force, continuing.".underline:"Use --force to continue.");c=c.yellow}else{c=("Fatal error: "+c).red}grunt.log.writeln(c)}function dumpStack(a){if(grunt.option("stack")){if(a.origError&&a.origError.stack){console.log(a.origError.stack)}else{if(a.stack){console.log(a.stack)}}}}fail.fatal=function(a,b){writeln(a,"fatal");dumpStack(a);grunt.util.exit(typeof b==="number"?b:fail.code.FATAL_ERROR)};fail.errorcount=0;fail.warncount=0;fail.warn=function(a,b){var c=typeof a==="string"?a:a.message;fail.warncount++;writeln(c,"warn");if(!grunt.option("force")){dumpStack(a);grunt.log.writeln().fail("Aborted due to warnings.");grunt.util.exit(typeof b==="number"?b:fail.code.WARNING)}};fail.report=function(){if(fail.warncount>0){grunt.log.writeln().fail("Done, but with warnings.")}else{grunt.log.writeln().success("Done, without errors.")}};