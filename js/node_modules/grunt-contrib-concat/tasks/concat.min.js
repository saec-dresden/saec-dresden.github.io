"use strict";module.exports=function(b){var a=require("./lib/comment").init(b);b.registerMultiTask("concat","Concatenate files.",function(){var e=this.options({separator:b.util.linefeed,banner:"",footer:"",stripBanners:false,process:false});if(e.stripBanners===true){e.stripBanners={}}if(e.process===true){e.process={}}var c=b.template.process(e.banner);var d=b.template.process(e.footer);this.files.forEach(function(g){var h=c+g.src.filter(function(f){if(!b.file.exists(f)){b.log.warn('Source file "'+f+'" not found.');return false}else{return true}}).map(function(f){var i=b.file.read(f);if(e.process){i=b.template.process(i,e.process)}if(e.stripBanners){i=a.stripBanner(i,e.stripBanners)}return i}).join(b.util.normalizelf(e.separator))+d;b.file.write(g.dest,h);b.log.writeln('File "'+g.dest+'" created.')})})};